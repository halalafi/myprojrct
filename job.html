<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Job Assistant</title>
    <link href="https://fonts.googleapis.com/css2?family=Tajawal:wght@400;700&display=swap" rel="stylesheet">
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
            }
        

        /* Body and container styles */
        body {
            font-family: 'Tajawal', sans-serif;
            font-family: 'Tajawal', sans-serif;
            direction: rtl; /* Right-to-left for Arabic */
            height: 100vh;
            display: flex;
            width: 100%;
            justify-content: center;
            align-items: center;
            padding: 30px; /* Margin around the container */
            background-color: #a68ba3;
        }

        .container {
            
            width: 900px;
            height: 800px;
            max-width: calc(100% - 80px); /* 30px padding on each side */
            max-height: calc(100% - 80px); /* 30px padding on each side */
            display: flex;
            background-color: rgba(0, 0, 0, 0.482);
            
            flex-direction: column;
            border-radius: 20px;
            overflow: auto;
            overflow-y: auto!important;
            box-shadow: 0px 4px 10px rgba(0, 0, 0, 0.2);
        }
        

        /* Header */
        .header {
            background-color: #744b78;
            color: #fff;
            display: flex;
            align-items: center;
            font-family: 'Tajawal', sans-serif;
            padding: 10px 20px;
        }

        .icon {
            width: 50px;
            height: 50px;
            border-radius: 50%; /* Ù„Ø¬Ø¹Ù„ Ø§Ù„Ø´ÙƒÙ„ Ø¯Ø§Ø¦Ø±Ø© */
            overflow: hidden; /* Ù„Ø¶Ù…Ø§Ù† Ø£Ù† Ø§Ù„ØµÙˆØ±Ø© Ø¯Ø§Ø®Ù„ Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© */
            display: inline-block;
        }

        .icon-image {
            width: 100%;
            height: 100%;
            object-fit: cover; /* Ù„ØªØºØ·ÙŠØ© Ø§Ù„Ø¯Ø§Ø¦Ø±Ø© Ø¨Ø§Ù„ÙƒØ§Ù…Ù„ Ø¨Ø§Ù„ØµÙˆØ±Ø© */
        }

        .title {
            font-size: 20px;
            font-family: 'Tajawal', sans-serif;
            font-weight: bold;
        }

        /* Chat button */
        .chat-button-container {
            text-align: left;
            left: 10px; /* ÙŠØ­Ø±Ùƒ Ø§Ù„Ø¹Ù†ØµØ± Ø¥Ù„Ù‰ Ø§Ù„ÙŠØ³Ø§Ø± */
            padding: 10px;
            size: 30px;
        }

        .chat-button-container button{
            background-color: #8f4d8d;
            color: #fff;
            padding: 10px 20px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 16px;
            transition: background-color 0.3s;
        }

        .chat-button:hover {
            background-color: #ae51ca;
        }


        /* Chat area */
        .chat-container {
            flex: 1;
            padding: 20px;
            overflow-y: auto !important; /* Ø¥Ø¸Ù‡Ø§Ø± Ø´Ø±ÙŠØ· Ø§Ù„ØªÙ…Ø±ÙŠØ± Ø¹Ù†Ø¯ Ø§Ù„Ø­Ø§Ø¬Ø© */
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 0; /* Ø¥Ø²Ø§Ù„Ø© Ø§Ù„Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„Ø´Ø§Øª ÙˆØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ */
        }

        .welcome-message {
            color: #ffffff;
            font-size: 25px;
            font-family: 'Tajawal', sans-serif;
            padding-bottom: 20px !important;
            text-align: center;
        }

        .button-group {
            display: flex;
            flex-direction: column;
            gap: 10px;
            margin-bottom: 10px;
        }

        .question-button {
            background-color: #90769e;
            color: #fff;
            font-family: 'Tajawal', sans-serif;
            padding: 10px;
            border: none;
            border-radius: 5px;
            cursor: pointer;
            font-size: 14px;
            transition: background-color 0.3s;
        }

        .question-button:hover {
            background-color: #3d0ced;
            font-family: 'Tajawal', sans-serif;
        }

        /* Messages */
        .message {
            padding: 10px;
            font-family: 'Tajawal', sans-serif;
            
            border-radius: 20px;
            margin-bottom: 10px;
            font-size: 14px;
            width: fit-content;
            max-width: 70%;
        }

        /* User Message Style */
        .user-message {
            background: linear-gradient(135deg, #9c7bb1, #bc9ee3); /* Gradiented color for user messages */
            color: #fff;
            font-family: 'Tajawal', sans-serif;
            align-self: flex-end;
            text-align: left !important;
            border-radius: 20px 20px 0 20px; /* Rounded edges */
            padding: 10px;
            border-radius: 20px 20px 0 20px;
            align-self: flex-end;
        }

        /* System Message Style */
        .system-message {
    background: linear-gradient(135deg, #b0c4de, #7f8c8d); /* Gradiented color for system messages */
    color: #fff;
    font-family: 'Tajawal', sans-serif;
    text-align: right !important;
    border-radius: 20px 20px 0 20px; /* Rounded edges */
    padding: 10px;
    align-self: flex-end;
    float: right; /* Make the element align to the right */
    margin-left: auto; /* Push the element fully to the right */
    margin-right: 0; /* Remove any margin on the right side */
}

       /* Input area */
.input-container {
    width: 100px !important;
    height: 40px !important ;
    display: flex;
    align-items: center;
    gap: 10px;
    padding: 10px;
    border-top: 1px solid #ddd;
    border-radius: 20px;
}


        .input-box {
    width: 830px;
    height: 40px !important;
    flex: 1;
    padding: 10px;
    border: 1px solid #ccc;
    border-radius: 5px;
    font-size: 14px;
    outline: none;
}
.send-button {
    background:  linear-gradient(135deg, #885781, #d55acd);
    border: none;
    color: #ffffff;
    padding: 10px;
    border-radius: 50%;
    cursor: pointer;
    font-size: 14px;
    
}

        .send-button:hover {
            background-color: #9f5e8f;
        }
        
        /* Footer */
        .footer {
            text-align: center;
            padding: 10px;
            background-color: #854c87;
            color: #fff;
            font-size: 12px;
        }
        .chat-button{
            font-family: 'Tajawal', sans-serif; 

        }
        /* ØªÙ†Ø³ÙŠÙ‚ Ø§Ù„Ø­Ø§ÙˆÙŠØ© */
.chatbb {
            position: fixed !important; /* ØªØ«Ø¨ÙŠØª Ø§Ù„Ø²Ø± */
            top: 10px !important; /* Ø¬Ø¹Ù„Ù‡ ÙÙŠ Ø§Ù„Ø£Ø¹Ù„Ù‰ */
            padding-top: 20px !important; /* Ù…Ø³Ø§ÙØ© Ø¨ÙŠÙ† Ø§Ù„Ø²Ø± ÙˆØ§Ù„Ø­Ø§ÙØ© Ø§Ù„Ø¹Ù„ÙˆÙŠØ© */
            right: 90px; /* ÙˆØ¶Ø¹Ù‡ ÙÙŠ Ø§Ù„Ø²Ø§ÙˆÙŠØ© Ø§Ù„ÙŠÙ…Ù†Ù‰ */
            z-index: 9999; /* ØªØ£ÙƒÙŠØ¯ Ø£Ù†Ù‡ ÙÙˆÙ‚ ÙƒÙ„ Ø§Ù„Ø¹Ù†Ø§ØµØ± */
            color: #fff !important; /* Ù„ÙˆÙ† Ø§Ù„Ù†Øµ */
            size: 35px !important; /* Ø­Ø¬Ù… Ø§Ù„Ø®Ø· */
            font-size: 35px !important; /* Ø­Ø¬Ù… Ø§Ù„Ø®Ø· */
            forced-color-adjust: #fff !important; /* Ù„ØªØ¬Ù†Ø¨ ØªØºÙŠÙŠØ± Ø§Ù„Ø£Ù„ÙˆØ§Ù† */
        }
        
       
    </style>
</head>
<link rel="apple-touch-icon" sizes="180x180" href="https://norby.io/images/favicon/apple-touch-icon.png">
    <link rel="shortcut icon" type="image/png" sizes="32x32" href="https://norby.io/images/favicon/favicon-32x32.png">
    <link rel="shortcut icon" type="image/png" sizes="16x16" href="https://norby.io/images/favicon/favicon-16x16.png">
    <link rel="manifest" href="https://norby.io/site.webmanifest">
    <link rel="mask-icon" href="https://norby.io/images/favicon/safari-pinned-tab.svg" color="#5bbad5">
    <meta name="msapplication-TileColor" content="#da532c">
    <meta name="theme-color" content="#fffff">

<body>
    <div class="chatbb" style="size: 35px !important; color: #fff !important;">
        <a href="ANU.AI.Chat.html">
            <svg class="menu-icon" width="55" height="55" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                <path d="M20.25 10.832V19.5001C20.25 19.699 20.171 19.8898 20.0303 20.0304C19.8897 20.1711 19.6989 20.2501 19.5 20.2501H15C14.8011 20.2501 14.6103 20.1711 14.4697 20.0304C14.329 19.8898 14.25 19.699 14.25 19.5001V15.0001C14.25 14.8012 14.171 14.6104 14.0303 14.4698C13.8897 14.3291 13.6989 14.2501 13.5 14.2501H10.5C10.3011 14.2501 10.1103 14.3291 9.96967 14.4698C9.82902 14.6104 9.75 14.8012 9.75 15.0001V19.5001C9.75 19.699 9.67098 19.8898 9.53033 20.0304C9.38968 20.1711 9.19891 20.2501 9 20.2501H4.5C4.30109 20.2501 4.11032 20.1711 3.96967 20.0304C3.82902 19.8898 3.75 19.699 3.75 19.5001V10.832C3.75001 10.7275 3.77187 10.6241 3.81416 10.5285C3.85646 10.433 3.91827 10.3473 3.99562 10.277L11.4956 3.19511C11.6337 3.06942 11.8137 2.99976 12.0005 2.99976C12.1872 2.99976 12.3672 3.06942 12.5053 3.19511L20.0053 10.277C20.0825 10.3474 20.1441 10.4331 20.1863 10.5286C20.2284 10.6242 20.2501 10.7275 20.25 10.832Z" fill="white" fill-opacity="0.3"></path>
                <path d="M20.5153 9.72855L13.0153 2.6523C13.0116 2.6491 13.0082 2.64566 13.005 2.64199C12.7289 2.39086 12.369 2.25171 11.9958 2.25171C11.6225 2.25171 11.2627 2.39086 10.9866 2.64199L10.9763 2.6523L3.48469 9.72855C3.33187 9.86907 3.20989 10.0398 3.12646 10.2299C3.04303 10.42 2.99997 10.6253 3 10.8329V19.5001C3 19.8979 3.15804 20.2795 3.43934 20.5608C3.72064 20.8421 4.10218 21.0001 4.5 21.0001H9C9.39782 21.0001 9.77936 20.8421 10.0607 20.5608C10.342 20.2795 10.5 19.8979 10.5 19.5001V15.0001H13.5V19.5001C13.5 19.8979 13.658 20.2795 13.9393 20.5608C14.2206 20.8421 14.6022 21.0001 15 21.0001H19.5C19.8978 21.0001 20.2794 20.8421 20.5607 20.5608C20.842 20.2795 21 19.8979 21 19.5001V10.8329C21 10.6253 20.957 10.42 20.8735 10.2299C20.7901 10.0398 20.6681 9.86907 20.5153 9.72855ZM19.5 19.5001H15V15.0001C15 14.6023 14.842 14.2208 14.5607 13.9395C14.2794 13.6582 13.8978 13.5001 13.5 13.5001H10.5C10.1022 13.5001 9.72064 13.6582 9.43934 13.9395C9.15804 14.2208 9 14.6023 9 15.0001V19.5001H4.5V10.8329L4.51031 10.8236L12 3.75011L19.4906 10.8217L19.5009 10.8311L19.5 19.5001Z" fill="white"></path>
            </svg>
        </a>
    </div>
    <div class="container">
        <div class="header">
            <div class="icon">
                <img src="https://norby.io/images/favicon/apple-touch-icon.png" alt="Icon" class="icon-image">
            </div>
            <h1 class="title" style="font-family: 'Tajawal', sans-serif;"> Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù </h1>
        </div>

        <div class="chat-button-container">
            <button class="chat-button"  onclick="startChat()">ğŸ ï¸</button>
        </div>

        <!-- ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© -->
        <div class="chat-container" id="chatContainer">
            <p class="welcome-message">Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø°ÙƒÙŠ! Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ø£Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ÙˆØ¸Ø§Ø¦Ù Ù…Ù†Ø§Ø³Ø¨Ø©.</p>
            <div class="button-group">
                <button class="question-button" onclick="askSpecialtyQuestion()">Ù…Ø§ Ù‡Ùˆ Ø§Ù„ØªØ®ØµØµ Ø§Ù„Ø°ÙŠ ØªÙˆØ¯ Ù…Ø¹Ø±ÙØ© Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ù…ÙƒÙ†Ø© Ù„Ù„Ø®Ø±ÙŠØ¬ÙŠÙ†ØŸ</button>
                <button class="question-button" onclick="askCompaniesQuestion()">Ù‡Ù„ ØªØ±ØºØ¨ ÙÙŠ Ù…Ø¹Ø±ÙØ© Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© Ù„ØªØ®ØµØµÙƒ ÙÙŠ Ù…Ù†Ø·Ù‚Ø© Ù…Ø¹ÙŠÙ†Ø©ØŸ</button>
                <button class="question-button" onclick="askJobSearch()">ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ÙˆØ¸Ø§Ø¦Ù Ù…ØªØ§Ø­Ø© Ø­Ø³Ø¨ ØªØ®ØµØµÙƒ ÙˆÙ…Ù‡Ø§Ø±Ø§ØªÙƒ!</button>
                <button class="question-button" onclick="uploadResume()">ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù‚Ø±Ø§Ø¡Ø© Ø³ÙŠØ±ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ© ÙˆÙ…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ÙˆØ¸Ø§Ø¦Ù!</button>
                <button class="question-button" onclick="createResume()">ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø³ÙŠØ±ØªÙƒ Ø§Ù„Ø°Ø§ØªÙŠØ©!</button>
            </div>
        </div>

        <!-- ØµÙ†Ø¯ÙˆÙ‚ Ø§Ù„Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„Ø°ÙŠ Ø³ÙŠØ¸Ù‡Ø± Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø© -->
        <div class="input-container" id="inputContainer" style="display: none;">
            <input type="text" id="specialtyInput" class="input-box" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„ØªØ®ØµØµ Ù‡Ù†Ø§">
            <button class="send-button" onclick="fetchJobsAsMessages()">&#10148;</button>
        </div>  
    </div>
    <script>
        // Ø¨Ø¯Ø¡ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
        function startChat() {
            const chatContainer = document.getElementById("chatContainer");
            const inputContainer = document.getElementById("inputContainer");
    
            // Ù…Ø³Ø­ Ø§Ù„Ù…Ø­Ø§Ø¯Ø«Ø©
            chatContainer.innerHTML = `
                <p class="welcome-message">Ù…Ø±Ø­Ø¨Ù‹Ø§ Ø¨Ùƒ ÙÙŠ Ù…Ø³Ø§Ø¹Ø¯ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ø°ÙƒÙŠ! Ø£Ù†Ø§ Ù‡Ù†Ø§ Ù„Ø£Ø³Ø§Ø¹Ø¯Ùƒ ÙÙŠ Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ÙˆØ¸Ø§Ø¦Ù Ù…Ù†Ø§Ø³Ø¨Ø©.</p>
                <div class="button-group">
                    <button class="question-button" onclick="askSpecialtyQuestion()">Ù…Ø§ Ù‡Ùˆ Ø§Ù„ØªØ®ØµØµ Ø§Ù„Ø°ÙŠ ØªÙˆØ¯ Ù…Ø¹Ø±ÙØ© Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ù…ÙƒÙ†Ø© Ù„Ù„Ø®Ø±ÙŠØ¬ÙŠÙ†ØŸ</button>
                    <button class="question-button" onclick="askCompaniesQuestion()">Ù‡Ù„ ØªØ±ØºØ¨ ÙÙŠ Ù…Ø¹Ø±ÙØ© Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ù…ØªØ§Ø­Ø© Ù„ØªØ®ØµØµÙƒ ÙÙŠ Ù…Ù†Ø·Ù‚Ø© Ù…Ø¹ÙŠÙ†Ø©ØŸ</button>
                    <button class="question-button" onclick="askJobSearch()">ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ÙˆØ¸Ø§Ø¦Ù Ù…ØªØ§Ø­Ø© Ø­Ø³Ø¨ ØªØ®ØµØµÙƒ ÙˆÙ…Ù‡Ø§Ø±Ø§ØªÙƒ!</button>
                    <button class="question-button" onclick="uploadResume()">ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù‚Ø±Ø§Ø¡Ø© Ø³ÙŠØ±ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ© ÙˆÙ…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ÙˆØ¸Ø§Ø¦Ù!</button>
                    <button class="question-button" onclick="createResume()">ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø³ÙŠØ±ØªÙƒ Ø§Ù„Ø°Ø§ØªÙŠØ©!</button>
                </div>`;
            inputContainer.style.display = "none";
        }
    
        // Ø·Ø±Ø­ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¹Ù† Ø§Ù„ØªØ®ØµØµ Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø±
    function askSpecialtyQuestion() {
        const chatContainer = document.getElementById("chatContainer");
        chatContainer.innerHTML = `<p class="system-message">Ù…Ø§ Ù‡Ùˆ Ø§Ù„ØªØ®ØµØµ Ø§Ù„Ø°ÙŠ ØªÙˆØ¯ Ù…Ø¹Ø±ÙØ© Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ù…ÙƒÙ†Ø© Ù„Ù„Ø®Ø±ÙŠØ¬ÙŠÙ†ØŸ</p>`;
        chatContainer.innerHTML = `
            <input type="text" id="specialtyInput"  class="inputcontainer"  style="height: 40px !important;" placeholder="Ø£Ø¯Ø®Ù„ Ø§Ù„ØªØ®ØµØµ Ù‡Ù†Ø§">
            <button class="send-button" style ="height:30px !importan;" onclick="fetchJobsAsMessages()"> &#10148;</button>
        `;
        chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    // Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ API Ù„Ù„Ø­ØµÙˆÙ„ Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù ÙˆØ¹Ø±Ø¶Ù‡Ø§ ÙƒØ±Ø³Ø§Ø¦Ù„
    function fetchJobsAsMessages() {
        const specialtyInput = document.getElementById("specialtyInput");
        const query = specialtyInput.value.trim(); // Ù‚Ø±Ø§Ø¡Ø© Ø§Ù„ØªØ®ØµØµ Ù…Ù† Ø§Ù„Ø­Ù‚Ù„

        if (!query) {
            alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ØªØ®ØµØµ!");
            return;
        }

        // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
        displayUserMessage(`Ø§Ù„ØªØ®ØµØµ Ø§Ù„Ø°ÙŠ Ø£Ø¯Ø®Ù„ØªÙ‡: ${query}`);

        // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© ØªØ­Ù…ÙŠÙ„ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù†ØªØ¸Ø§Ø± Ø§Ù„Ø±Ø¯
        const chatContainer = document.getElementById("chatContainer");
        chatContainer.innerHTML += `<p class="system-message">Ø¬Ø§Ø±Ù Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ù„Ù„ØªØ®ØµØµ: ${query}...</p>`;
        chatContainer.scrollTop = chatContainer.scrollHeight;

        // Ø§Ø³ØªØ¯Ø¹Ø§Ø¡ API Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… fetch
        fetch(`/jobs?query=${encodeURIComponent(query)}`, {
            method: "GET",
            headers: {
                "Content-Type": "application/json",
            },
        })
        .then(response => {
            if (!response.ok) {
                throw new Error("Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ ÙˆØ¸Ø§Ø¦Ù ØªÙ†Ø§Ø³Ø¨ Ù‡Ø°Ø§ Ø§Ù„ØªØ®ØµØµ.");
            }
            return response.json();
        })
        .then(data => {
            displayJobsAsMessages(data);
        })
        .catch(error => {
            chatContainer.innerHTML += `<p class="system-message">Ø®Ø·Ø£: ${error.message}</p>`;
            chatContainer.scrollTop = chatContainer.scrollHeight;
        });
    }

    // Ø¹Ø±Ø¶ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù ÙƒØ±Ø³Ø§Ø¦Ù„
    function displayJobsAsMessages(jobs) {
        const chatContainer = document.getElementById("chatContainer");
        if (jobs && jobs.length > 0) {
            jobs.forEach(job => {
                chatContainer.innerHTML += `
                    <div class="system-message">
                        <p><strong>Ø¹Ù†ÙˆØ§Ù† Ø§Ù„ÙˆØ¸ÙŠÙØ©:</strong> ${job.title}</p>
                        <p><strong>Ø§Ù„ÙˆØµÙ:</strong> ${job.description}</p>
                    </div>
                `;
            });
        } else {
            chatContainer.innerHTML += `<p class="system-message">Ù„Ø§ ØªÙˆØ¬Ø¯ ÙˆØ¸Ø§Ø¦Ù ØªØªØ·Ø§Ø¨Ù‚ Ù…Ø¹ Ø§Ù„ØªØ®ØµØµ Ø§Ù„Ø°ÙŠ Ø£Ø¯Ø®Ù„ØªÙ‡.</p>`;
        }
        chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    function displayUserMessage(message) {
        const chatContainer = document.getElementById("chatContainer");
        chatContainer.innerHTML += `<p class="user-message">${message}</p>`;
        chatContainer.scrollTop = chatContainer.scrollHeight;
    }
        // Ø·Ø±Ø­ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¹Ù† Ø§Ù„Ø´Ø±ÙƒØ§Øª
    function askCompaniesQuestion() {
        const chatContainer = document.getElementById("chatContainer");
        chatContainer.innerHTML = `
            <p class="system-message">Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ Ø§Ù„ØªØ®ØµØµ ÙˆØ§Ù„Ù…Ù†Ø·Ù‚Ø© Ù„Ù…Ø¹Ø±ÙØ© Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ù…ØªØ§Ø­Ø©:</p>
            <p class="system-message">Ø§Ù„ØªØ®ØµØµ:</p>
            <input type="text" id="specializationInput" class="input-box" placeholder="Ø§Ù„ØªØ®ØµØµ">
            <p class="system-message">Ø§Ù„Ù…Ù†Ø·Ù‚Ø©:</p>
            <input type="text" id="cityInput" class="input-box" placeholder="Ø§Ù„Ù…Ù†Ø·Ù‚Ø©">
            <button class="send-button" onclick="searchCompanies()">Ø§Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø´Ø±ÙƒØ§Øª</button>`;
    }

    // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø´Ø±ÙƒØ§Øª
    function searchCompanies() {
        const specialization = document.getElementById("specializationInput").value.trim();
        const city = document.getElementById("cityInput").value.trim();

        if (!specialization || !city) {
            alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ØªØ®ØµØµ ÙˆØ§Ù„Ù…Ù†Ø·Ù‚Ø©!");
            return;
        }

        displayUserMessage(`Ø£Ø¨Ø­Ø« Ø¹Ù† Ø´Ø±ÙƒØ§Øª ÙÙŠ ØªØ®ØµØµ: ${specialization} ÙÙŠ Ù…Ù†Ø·Ù‚Ø©: ${city}`);

        // Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ API Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Google
        fetch(`/search_companies_google?city=${city}&specialization=${specialization}`)
            .then(response => {
                if (!response.ok) {
                    throw new Error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø¹Ø¨Ø± Google.");
                }
                return response.json();
            })
            .then(data => {
                displayCompanyLinks(data.company_links);
            })
            .catch(error => {
                alert(`Ø®Ø·Ø£: ${error.message}`);
            });

        // Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ API Ø§Ù„Ø¨Ø­Ø« ÙÙŠ Ù…Ù„Ù Ø§Ù„Ø´Ø±ÙƒØ§Øª Ø§Ù„Ù…Ø­Ù„ÙŠ
        fetch("/search_companies", {
            method: "POST",
            headers: { "Content-Type": "application/json" },
            body: JSON.stringify({ city, specialization }),
        })
            .then(response => {
                if (!response.ok) {
                    throw new Error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„Ø´Ø±ÙƒØ§Øª ÙÙŠ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø­Ù„ÙŠ.");
                }
                return response.json();
            })
            .then(data => {
                displayCompanyResults(data);
            })
            .catch(error => {
                alert(`Ø®Ø·Ø£: ${error.message}`);
            });
    }

    // Ø¹Ø±Ø¶ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ù…Ù† Google
    function displayCompanyLinks(links) {
        const chatContainer = document.getElementById("chatContainer");
        if (links && links.length > 0) {
            chatContainer.innerHTML += `<p class="system-message">Ø±ÙˆØ§Ø¨Ø· Ø§Ù„Ø´Ø±ÙƒØ§Øª Ù…Ù† Google:</p>`;
            links.forEach(link => {
                chatContainer.innerHTML += `<p class="system-message"><a href="${link}" target="_blank">${link}</a></p>`;
            });
        } else {
            chatContainer.innerHTML += `<p class="system-message">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø±ÙˆØ§Ø¨Ø· Ù…Ù† Google.</p>`;
        }
        chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    // Ø¹Ø±Ø¶ Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø´Ø±ÙƒØ§Øª Ù…Ù† Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø­Ù„ÙŠ
    function displayCompanyResults(companies) {
        const chatContainer = document.getElementById("chatContainer");
        if (companies && companies.length > 0) {
            chatContainer.innerHTML += `<p class="system-message">Ù†ØªØ§Ø¦Ø¬ Ø§Ù„Ø´Ø±ÙƒØ§Øª Ù…Ù† Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø­Ù„ÙŠ:</p>`;
            companies.forEach(company => {
                chatContainer.innerHTML += `
                    <p class="system-message">
                        <strong>Ø§Ø³Ù… Ø§Ù„Ø´Ø±ÙƒØ©:</strong> ${company.company}<br>
                        <strong>Ø§Ù„Ù…ÙˆÙ‚Ø¹:</strong> ${company.location}<br>
                        <strong>Ø§Ù„ØªØ®ØµØµ:</strong> ${company.specialization}
                    </p>`;
            });
        } else {
            chatContainer.innerHTML += `<p class="system-message">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø´Ø±ÙƒØ§Øª Ù…Ø·Ø§Ø¨Ù‚Ø© ÙÙŠ Ø§Ù„Ù…Ù„Ù Ø§Ù„Ù…Ø­Ù„ÙŠ.</p>`;
        }
        chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
function displayUserMessage(message) {
    const chatContainer = document.getElementById("chatContainer");
    chatContainer.innerHTML += `<p class="user-message">${message}</p>`;
    chatContainer.scrollTop = chatContainer.scrollHeight;
}
// Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
function displayUserMessage(message) {
    const chatContainer = document.getElementById("chatContainer");
    chatContainer.innerHTML += `<p class="user-message">${message}</p>`;
    chatContainer.scrollTop = chatContainer.scrollHeight;
}
// Ø·Ø±Ø­ Ø§Ù„Ø³Ø¤Ø§Ù„ Ø¹Ù† Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª
function askJobSearch() {
        const chatContainer = document.getElementById("chatContainer");
        chatContainer.innerHTML = `
            <p class="system-message">Ù…Ù† ÙØ¶Ù„Ùƒ Ø£Ø¯Ø®Ù„ Ø§Ù„ØªØ®ØµØµ ÙˆØ§Ù„Ù…Ù†Ø·Ù‚Ø© Ù„Ù…Ø¹Ø±ÙØ© ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…ØªØ§Ø­Ø©:</p>
            <p class="system-message">Ø§Ù„ØªØ®ØµØµ:</p>
            <input type="text" id="specializationInput" class="input-box" placeholder="Ø§Ù„ØªØ®ØµØµ">
            <p class="system-message">Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª :</p>
            <input type="text" id="skillInput" class="input-box" placeholder="Ø§Ø¯Ø®Ù„ Ù…Ù‡Ø§Ø±Ø§ØªÙƒ Ù…ÙØµÙˆÙ„Ø© Ø¨ÙÙˆØ§ØµÙ„ .">
            <button class="send-button" onclick="searchjob()">Ø§Ø¨Ø­Ø« Ø¹Ù† ÙˆØ¸Ø§Ø¦Ù</button>`;
    }

    // Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ÙˆØ¸Ø§Ø¦Ù
    function searchjob() {
        const specialization = document.getElementById("specializationInput").value.trim();
        const skill = document.getElementById("skillInput").value.trim();

        if (!specialization || !skill) {
            alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ØªØ®ØµØµ ÙˆØ§Ù„Ù…Ù†Ø·Ù‚Ø©!");
            return;
        }

        displayUserMessage(`Ø£Ø¨Ø­Ø« Ø¹Ù† ÙˆØ¸Ø§Ø¦Ù ÙÙŠ ØªØ®ØµØµ: ${specialization} ÙÙŠ Ù…Ù†Ø·Ù‚Ø©: ${skill}`);
        displayUserMessage("Ø¬Ø§Ø±ÙŠ Ø§Ù„Ø¨Ø­Ø«...");

        // Ø§Ù„Ø§ØªØµØ§Ù„ Ø¨Ù€ API Ø§Ù„Ø¨Ø­Ø« Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… Google
        fetch(`/search_jobs_google?specialty=${specialization}&skills=${skill}`)
            .then(response => {
                if (!response.ok) {
                    throw new Error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ÙˆØ¸Ø§Ø¦Ù Ø¹Ø¨Ø± Google.");
                }
                return response.json();
            })
            .then(data => {
                displayCompanyLinks(data.job_links); // ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ù…ÙØªØ§Ø­ Ø§Ù„ØµØ­ÙŠØ­ Ù‡Ùˆ job_links
            })
            .catch(error => {
                alert(`Ø®Ø·Ø£: ${error.message}`);
            });
    }

    // Ø¹Ø±Ø¶ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ù…Ù† Google
    function displayCompanyLinks(links) {
        const chatContainer = document.getElementById("chatContainer");
        if (links && links.length > 0) {
            chatContainer.innerHTML += `<p class="system-message">Ø±ÙˆØ§Ø¨Ø· ÙˆØ¸Ø§Ø¦Ù Ù…Ù† Google:</p>`;
            links.forEach(link => {
                chatContainer.innerHTML += `
                    <p class="system-message">
                        <a href="${link}" target="_blank" style="color: #1a73e8;">${link}</a>
                    </p>`;
            });
        } else {
            chatContainer.innerHTML += `<p class="system-message">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø±ÙˆØ§Ø¨Ø· Ù…Ù† Google.</p>`;
        }
        chatContainer.scrollTop = chatContainer.scrollHeight;
    }

    // Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
    function displayUserMessage(message) {
        const chatContainer = document.getElementById("chatContainer");
        chatContainer.innerHTML += `<p class="user-message">${message}</p>`;
        chatContainer.scrollTop = chatContainer.scrollHeight;
    }

// Ø¯Ø§Ù„Ø© Ù„Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø§Ù„Ø²Ø±
function jobSearch() {
    const specialty = document.getElementById("specializationInput").value.trim();
    const skills = document.getElementById("skillsInput").value.trim(); // Fixing the variable reference
    if (!specialty || !skills) {
        alert("ÙŠØ±Ø¬Ù‰ Ø¥Ø¯Ø®Ø§Ù„ Ø§Ù„ØªØ®ØµØµ ÙˆØ§Ù„Ù…Ù‡Ø§Ø±Ø§Øª!");
        return;
    }
    displayUserMessage(`Ø£Ø¨Ø­Ø« Ø¹Ù† ÙˆØ¸Ø§Ø¦Ù ÙÙŠ ØªØ®ØµØµ: ${specialization}ÙˆÙ…Ù‡Ø§Ø±Ø§Øª : ${skills}`);


    // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¨Ø§Ø³ØªØ®Ø¯Ø§Ù… fetch Ø¥Ù„Ù‰ FastAPI
    fetch(`/search_jobs_google?specialty=${specialty}&skills=${skills}`)
        .then(response => {
            if (!response.ok) {
                throw new Error("Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø¹Ø¨Ø± Google.");
            }
            return response.json();
        })
        .then(data => {
            displayJobLinks(data.jobs_links);
        })
        .catch(error => {
            alert(`Ø®Ø·Ø£: ${error.message}`);
        });
}

// Ø¹Ø±Ø¶ Ø§Ù„Ø±ÙˆØ§Ø¨Ø· Ù…Ù† Google
function displayJobLinks(links) {
    const chatContainer = document.getElementById("chatContainer");
    if (links && links.length > 0) {
        chatContainer.innerHTML += `<p class="system-message">Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ù…Ù† Google:</p>`;
        links.forEach(link => {
            chatContainer.innerHTML += `<p class="system-message"><a href="${link}" target="_blank">${link}</a></p>`;
        });
    } else {
        chatContainer.innerHTML += `<p class="system-message">Ù„Ù… ÙŠØªÙ… Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø±ÙˆØ§Ø¨Ø· Ù…Ù† Google.</p>`;
    }
    chatContainer.scrollTop = chatContainer.scrollHeight;
}
// ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ©
function uploadResume() {
    const chatContainer = document.getElementById("chatContainer");
    chatContainer.innerHTML = `
        <p class="system-message" style="font-size: 20px; background-color: #90769e !important;">ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù‚Ø±Ø§Ø¡Ø© Ø³ÙŠØ±ØªÙƒ Ø§Ù„Ø´Ø®ØµÙŠØ© ÙˆÙ…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø§Ù„Ø¨Ø­Ø« Ø¹Ù† ÙˆØ¸Ø§Ø¦Ù!</p>
        <p class="system-message">Ù…Ù† ÙØ¶Ù„ÙƒØŒ Ù‚Ù… Ø¨ØªØ­Ù…ÙŠÙ„ Ø³ÙŠØ±ØªÙƒ Ø§Ù„Ø°Ø§ØªÙŠØ© Ù„ØªØ­Ù„ÙŠÙ„ Ù…Ù‡Ø§Ø±Ø§ØªÙƒ ÙˆÙ…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø§Ù„Ø¹Ø«ÙˆØ± Ø¹Ù„Ù‰ Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…Ù†Ø§Ø³Ø¨Ø©:</p>
        <form id="uploadForm">
            <input type="file" id="pdfFile" style="font-size: 20px; background-color: #90769e !important;" accept=".pdf,.doc,.docx">
            <button type="submit" class="send-button">Ø¥Ø¨Ø­Ø« Ø¹Ù† ÙˆØ¸Ø§Ø¦Ù Ù…ØªØ§Ø­Ø©</button>
        </form>
    `;

    // Ø¥Ø¶Ø§ÙØ© Ø§Ù„Ù…Ø³ØªÙ…Ø¹ Ù„Ù„Ø£Ø­Ø¯Ø§Ø« Ø¨Ø¹Ø¯ ØªØ­Ù…ÙŠÙ„ Ø§Ù„Ù…Ø­ØªÙˆÙ‰
    document.getElementById("uploadForm").addEventListener("submit", async function (event) {
        event.preventDefault(); // Ù…Ù†Ø¹ Ø¥Ø¹Ø§Ø¯Ø© ØªØ­Ù…ÙŠÙ„ Ø§Ù„ØµÙØ­Ø© Ø¹Ù†Ø¯ Ø§Ù„Ø¶ØºØ· Ø¹Ù„Ù‰ Ø²Ø± Ø§Ù„Ø¥Ø±Ø³Ø§Ù„

        const pdfFile = document.getElementById("pdfFile").files[0];
        console.log(pdfFile); // Ù„Ù„ØªØ£ÙƒØ¯ Ù…Ù† Ø£Ù† Ø§Ù„Ù…Ù„Ù ØªÙ… Ø§Ø®ØªÙŠØ§Ø±Ù‡
        if (!pdfFile) {
            alert("ÙŠØ±Ø¬Ù‰ Ø§Ø®ØªÙŠØ§Ø± Ù…Ù„Ù PDF Ø£Ùˆ DOCX.");
            return;
        }

        const formData = new FormData();
        formData.append("file", pdfFile);

        try {
            // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø¥Ù„Ù‰ API Ù„ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ù„Ù
            const response = await fetch("http://127.0.0.1:8000/upload-pdf/", {
                method: "POST",
                body: formData,
            });

            if (!response.ok) {
                throw new Error(await response.text());
            }

            // Ø§Ù„ØªØ¹Ø§Ù…Ù„ Ù…Ø¹ Ø§Ù„Ø§Ø³ØªØ¬Ø§Ø¨Ø© JSON
            const data = await response.json();
            console.log(data);  // Ù„Ø¹Ø±Ø¶ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù…Ø³ØªÙ„Ù…Ø© Ù…Ù† API

            // Ø§Ù„ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª Ø§Ù„Ù‚Ø§Ø¯Ù…Ø© Ù…Ù† Ø§Ù„Ù€ API ÙˆØªØ­Ø¯ÙŠØ« Ø§Ù„ØµÙØ­Ø©
            if (data.error) {
                // Ø¥Ø¸Ù‡Ø§Ø± Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ø®Ø·Ø£ ÙÙŠ Ø§Ù„Ø´Ø§Øª ÙƒÙˆÙ†ØªÙŠØ±
                chatContainer.innerHTML += `
                    <p class="error-message">${data.error}</p>
                `;
            } else {
                // Ø¹Ø±Ø¶ Ø§Ù„ØªØ®ØµØµ ÙˆØ§Ù„Ù…Ù‡Ø§Ø±Ø§Øª ÙÙŠ Ø§Ù„Ø´Ø§Øª ÙƒÙˆÙ†ØªÙŠØ±
                chatContainer.innerHTML += `
                    <p class="system-message">Ø§Ù„ØªØ®ØµØµ: ${data.specialization || "ØºÙŠØ± Ù…Ø­Ø¯Ø¯"}</p>
                    <p class="system-message">Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª: ${data.skills.length > 0 ? data.skills.join(", ") : "Ù„Ø§ ØªÙˆØ¬Ø¯ Ù…Ù‡Ø§Ø±Ø§Øª"}</p>
                `;

                // Ø¹Ø±Ø¶ Ø±ÙˆØ§Ø¨Ø· Ø§Ù„ÙˆØ¸Ø§Ø¦Ù ÙƒÙ€ "system-message"
                if (data.job_links && data.job_links.length > 0) {
                    chatContainer.innerHTML += `
                        <p class="system-message">Ø§Ù„ÙˆØ¸Ø§Ø¦Ù Ø§Ù„Ù…ØªØ§Ø­Ø©:</p>
                    `;
                    data.job_links.forEach(link => {
                        chatContainer.innerHTML += `
                            <p class="system-message"><a href="${link}" target="_blank">${link}</a></p>
                        `;
                    });
                } else {
                    chatContainer.innerHTML += `
                        <p class="system-message">Ù„Ø§ ØªÙˆØ¬Ø¯ ÙˆØ¸Ø§Ø¦Ù Ù…ØªØ§Ø­Ø© ÙÙŠ Ø§Ù„ÙˆÙ‚Øª Ø§Ù„Ø­Ø§Ù„ÙŠ.</p>
                    `;
                }
            }

        } catch (error) {
            console.error(error);  // Ø¹Ø±Ø¶ Ø§Ù„Ø£Ø®Ø·Ø§Ø¡ ÙÙŠ Ø§Ù„Ù€ Console
            chatContainer.innerHTML += `
                <p class="error-message">Ø­Ø¯Ø« Ø®Ø·Ø£ Ø£Ø«Ù†Ø§Ø¡ ØªØ­Ù„ÙŠÙ„ Ø§Ù„Ù…Ù„Ù: ${error.message || "ÙŠØ±Ø¬Ù‰ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù„Ø§Ø­Ù‚Ù‹Ø§"}</p>
            `;
        }
    });
}
// Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ©
function createResume() {
        const chatContainer = document.getElementById("chatContainer");
        chatContainer.innerHTML = `
            <p class="system-message" style="font-size: 20px;">ÙŠÙ…ÙƒÙ†Ù†ÙŠ Ù…Ø³Ø§Ø¹Ø¯ØªÙƒ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø³ÙŠØ±ØªÙƒ Ø§Ù„Ø°Ø§ØªÙŠØ©!</p>
            <p class="system-message">Ø£Ø¯Ø®Ù„ Ù…Ø¹Ù„ÙˆÙ…Ø§ØªÙƒ Ù„Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ©:</p>
            <p class="system-message">Ø§Ù„Ø§Ø³Ù… Ø§Ù„ÙƒØ§Ù…Ù„:</p>
            <input type="text" class="input-box" id="fullNameInput" placeholder="Ø§Ø³Ù…Ùƒ Ø§Ù„ÙƒØ§Ù…Ù„">
            <p class="system-message">Ø§Ù„ØªØ®ØµØµ:</p>
            <input type="text" class="input-box" id="specialtyInput" placeholder="ØªØ®ØµØµÙƒ">
            <p class="system-message">Ø§Ù„Ø¬Ø§Ù…Ø¹Ø© Ø§Ù„ØªÙŠ ØªØ®Ø±Ø¬Øª Ù…Ù†Ù‡Ø§:</p>
            <input type="text" class="input-box" id="universityInput" placeholder="Ø§Ø³Ù… Ø§Ù„Ø¬Ø§Ù…Ø¹Ø©">
            <p class="system-message">Ù…Ø¹Ù„ÙˆÙ…Ø§Øª Ø§Ù„Ø§ØªØµØ§Ù„:</p>
            <input type="text" class="input-box" id="contactInfoInput" placeholder="Ø±Ù‚Ù… Ø§Ù„Ù‡Ø§ØªÙ Ø£Ùˆ Ø§Ù„Ø¨Ø±ÙŠØ¯ Ø§Ù„Ø¥Ù„ÙƒØªØ±ÙˆÙ†ÙŠ">
            <p class="system-message">Ø§Ù„Ù…Ù‡Ø§Ø±Ø§Øª:</p>
            <input type="text" class="input-box" id="skillsInput" placeholder="Ø§Ø°ÙƒØ± Ù…Ù‡Ø§Ø±Ø§ØªÙƒ Ù…ÙØµÙˆÙ„Ø© Ø¨ÙÙˆØ§ØµÙ„">
            <button class="send-button" onclick="generateCV()">Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ©</button>
        `;
    }

    // Ø¥Ø±Ø³Ø§Ù„ Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙˆØªÙˆÙ„ÙŠØ¯ Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ©
    function generateCV() {
        const fullName = document.getElementById('fullNameInput').value;
        const specialty = document.getElementById('specialtyInput').value;
        const university = document.getElementById('universityInput').value;
        const contactInfo = document.getElementById('contactInfoInput').value;
        const skills = document.getElementById('skillsInput').value;

        // ØªØ­Ù‚Ù‚ Ù…Ù† Ø§Ù„Ø¨ÙŠØ§Ù†Ø§Øª ÙÙŠ Ø§Ù„Ù€ console
        console.log({
            fullName: fullName,
            specialty: specialty,
            university: university,
            contactInfo: contactInfo,
            skills: skills
        });

        const formData = new FormData();
        formData.append('name', fullName);
        formData.append('specialization', specialty);
        formData.append('skills', skills);
        formData.append('education', university);
        formData.append('experience', 'No experience');  // Ù…Ø«Ø§Ù„ØŒ Ù‚Ù… Ø¨ØªØ¹Ø¯ÙŠÙ„ Ø°Ù„Ùƒ Ø­Ø³Ø¨ Ø§Ù„Ø­Ø§Ø¬Ø©
        formData.append('contact_info', contactInfo);

        fetch('/create_cv/', {
            method: 'POST',
            body: formData,
        })
        .then(response => {
            if (response.ok) {
                return response.blob();
            } else {
                throw new Error('Error creating CV');
            }
        })
        .then(blob => {
            const url = window.URL.createObjectURL(blob);
            const link = document.createElement('a');
            link.href = url;
            link.download = 'CV.pdf';
            document.body.appendChild(link);
            link.click();
            document.body.removeChild(link);
        })
        .catch(error => {
            console.error('Error:', error);
            alert('ÙØ´Ù„ ÙÙŠ Ø¥Ù†Ø´Ø§Ø¡ Ø§Ù„Ø³ÙŠØ±Ø© Ø§Ù„Ø°Ø§ØªÙŠØ©. Ø§Ù„Ø±Ø¬Ø§Ø¡ Ø§Ù„Ù…Ø­Ø§ÙˆÙ„Ø© Ù…Ø±Ø© Ø£Ø®Ø±Ù‰.');
        });
    }

// Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù…Ø³ØªØ®Ø¯Ù…
function displayUserMessage(message) {
    const chatContainer = document.getElementById("chatContainer");
    chatContainer.innerHTML += `<p class="user-message">${message}</p>`;
    chatContainer.scrollTop = chatContainer.scrollHeight;
}

// Ø¹Ø±Ø¶ Ø±Ø³Ø§Ù„Ø© Ø§Ù„Ù†Ø¸Ø§Ù…
function displaySystemMessage(message) {
    const chatContainer = document.getElementById("chatContainer");
    chatContainer.innerHTML += `<p class="system-message">${message}</p>`;
    chatContainer.scrollTop = chatContainer.scrollHeight;
}

    </script>
    
</body>
</html>